

# **<p align="center"><span style="color:#23C8AF">메이크케이크(MakeCake) </br> 레터링 케이크의 모든 주문 과정을 도와주는 서비스 </span></p>**


<p align="center"><a href="https://make-cake.com">MAKE CAKE</a></p>

![메인페이지](https://user-images.githubusercontent.com/97425158/161822033-65104ec3-7968-4479-8ee2-20b48db765b4.jpeg)

<!-- <p align="center"><img src="https://user-images.githubusercontent.com/97425158/161680492-266f80e7-709d-41c5-82b0-eb025f387f9c.png"></p> -->

## MakeCake Notion <a href="https://www.notion.so/4-Make-Cake-335c038c8d354afeb549b6dbe7b9a8f5"><img src="https://img.shields.io/badge/Notion-000000?style=flat&logo=Notion&logoColor=white&link=https://available-parent-09c.notion.site/12-aac1c51225424d16bda9bcce1bdb2360"></a>

## 📺 시연영상

[![image](https://user-images.githubusercontent.com/97425158/161682290-d885e68c-5f59-4429-a4b9-fa673ed39585.svg)](https://www.youtube.com/watch?v=7CAoUo4Ma4c&t=3s)

## 📅 제작기간 

* 2022년 02월 25일 ~ 2022년 04월 09일 (6주)

## 💃 팀원소개 🕺

## 👨🏻‍💻 Front-end (React) <a href="https://github.com/makecake04/makecake_FE"><img src="https://img.shields.io/badge/GitHub-000000?style=flat&logo=GitHub&logoColor=white&link=https://github.com/spacejay1007/plogging_FE"/></a>

  * 오성택 🤵🏻 (팀장)
  * 김두루 🤵🏼‍♂️
  * 지정환 🤵🏽‍♂️

## 🧑🏽‍💻 Back-end (Spring) <a href="https://github.com/makecake04/makecake_BE"><img src="https://img.shields.io/badge/GitHub-000000?style=flat&logo=GitHub&logoColor=white&link=https://github.com/spacejay1007/plogging_FE"/></a>

  * 구민주 👩🏻‍⚖️
  * 고혜지 🧑🏻‍💼
  * 송성근 🤵🏻‍♂️

## 🎨 Designer 

  * 황성원 👩🏻‍🎨
  * 이지해 👩‍🎨

### 🔧 사용 기술

![리액트](https://user-images.githubusercontent.com/97425158/161745107-cc062718-9c52-4446-8f14-9faba0b9dea7.svg)
![자바스크립트](https://user-images.githubusercontent.com/97425158/161745127-a3fa5ed0-ceb6-427a-94d1-834d762fd3b4.svg)
![에이치티엠엘](https://user-images.githubusercontent.com/97425158/161745161-566f015b-0ec2-4bba-82aa-f3bb7498bdd7.svg)
![씨에스에스](https://user-images.githubusercontent.com/97425158/161745198-92ff3896-7ce0-4946-a8b4-e6d23223eb3b.svg)
![리덕스](https://user-images.githubusercontent.com/97425158/161745222-ea0ba9bf-86e4-48cb-8a44-f8d8bfec2d02.svg)
![악시오스](https://user-images.githubusercontent.com/97425158/161745239-453b4075-7bd0-4c63-9c5a-5c1d76021b8d.svg)
![스타일드컴포넌트](https://user-images.githubusercontent.com/97425158/161745269-27a8a71d-788d-4bdf-97e8-f86c97b224a9.svg)
![클라우드프론트](https://user-images.githubusercontent.com/97425158/161745404-114d6c7d-c720-4370-b0dd-4aea4893bb1d.svg)
![아마존S3](https://user-images.githubusercontent.com/97425158/161744999-3ae8a4d1-48d8-41fc-af06-c601f6e1fc4d.svg)

### 💬 커뮤니케이션 툴

- Gather
- Slack
- Notion
- Github
- Zoom

## 🎙 **1.프로젝트 소개**
## “레터링 케이크 주문, 그동안 불편하셨죠?”

메이크케이크는 레터링 케이크 주문의 불편하고 복잡한 과정을 조금이라도 편하게 만들기 위한 서비스이며 레터링 케이크 매장 정보들을 쉽게 찾아볼 수 있고, 직접 도안을 그려볼 수 있습니다!

## 🎯 **2. 기획배경, 타겟층**
<p align="center"><img src="https://user-images.githubusercontent.com/97425158/161731819-26aeb19a-3bec-4110-813f-cee26477817d.png" height="500"></img></p>

최근 몇년 새 MZ세대를 중심으로 생일, 입학 기념 선물 등 특별한 날에 레터링 케이크를 찾으시는 분들이 많아지고 있습니다. 
다양한 종류의 레터링 문구와 케이크 모양, 크기, 데코레이션 등 취지에 맞게 레터링 케이크를 꾸미고 SNS에 사진을 업로드하는 활동도 활발해지고 있습니다.

그러나 대부분 포털사이트에 있는 이미지 사진이나 SNS에 업로드된 사진들을 통해서 제작을 하고있습니다. 이로인해서 제작하고 싶은 레터링 케이크 디자인에 제약이 있다고 생각했습니다.
그리하여 기존의 불편함들을 해소하고 한층 더 편리하게 제작/주문이 가능한 플랫폼 개발 구상을 하게 되었습니다.

저희는 레터링 케이크 도안을 직접 제작 및 주문 할 수 있는 기능을 지원하고, 서로 도안을 게시글에 작성하여 공유하며 소통할 수 있는 커뮤니티를 개발하고 싶었습니다.

따라서 웹에서 쉽고 간편하게 레터링 케이크 제작, 주문 등을 가능하게 하여 유저친화적 UI/UX 접근성이 높은 커뮤니티 플랫폼을 목표로 개발하였습니다.

 <a href="https://github.com/makecake04/makecake_FE/wiki"><h1>메이크케이크 프론트엔드의 고민 살펴보기  - WIKI</h1></a>
 
<!-- ## ✔️ **3. 작업시 준수했던 사항**
3-1. 스크럼

- 매일 오전 10시, 간단한 미팅을 통해 각자의 작업 상황과 특이사항을 공유하였습니다. 특이사항은 문제 해결 과정 속에서 겪었던 이슈와 도움 및 수정이 필요한지 여부를 공유하였습니다. 그 후, Task를 역할분담하여 효율적으로 TodoList를 해결하였습니다. 지속적인 소통 결과, 조금 여유있게 프로덕트를 배포할 수 있었습니다.

3-2. CSS

- 세 명의 팀원 모두 CSS를 작성하는 스타일이 달라서 컨벤션을 정하고 스타일을 통일시킬 필요가 있었습니다. 회의 끝에 Styled-components 라이브러리를 사용하여 style.js라는 파일을 각각의 폴더에 만들어 파일 내부에서 스타일링을 진행하였습니다.

3-3. 칸반

- 협업을 하다보면 Task 진전도를 알아야 하는 상황을 자주 마주칠 수 있습니다. 이를 사전에 인지하고 풀어나가기 위해서 각각의 Task를 시각화 할 필요가 있었습니다. 노션 페이지를 활용하여 담당자와 진행상황을 칸반에 작성하여 공유했습니다.

## 🙈 **4. 트러블 슈팅**
### 4-1. canvas 오브젝트의 색상 즉각 변경 기능, 뒤로가기 & 앞으로가기 기능을 패브릭 라이브러리에서 제공하지 않는 문제

- 캔버스 내 각각의 오브젝트 마다 오브젝트의 색상을 변경하는 속성이 달라 각자 case를 파악하고 처리

```javascript
  //color change
  const colorChange = (e) => {
    let obj = canvas.getActiveObject();
    if (icon === "backgroundColor" || (obj && icon === "backgroundColor")) {
      canvas.backgroundColor = e.target.value;
    } else if (obj) {
      if (!obj.filters && obj.fill !== null && !obj._objects) {
        obj.set({ fill: e.target.value });
      } else if (obj._objects) {
        for (let i = 0; i < obj._objects.length; i++) {
          obj._objects[i].set({
            fill: e.target.value,
          });
        }
      } else if (obj.filters) {
        let tint = new fabric.Image.filters.BlendColor({
          color: e.target.value,
          mode: "multiply",
        });
        obj.filters.push(tint);
        obj.applyFilters();
        obj.filters.pop(); //reset the filter so the obj's color can be changed in response to the color picker
      } else {
        obj.set({ stroke: e.target.value });
      }
    }
    setPickerColor(e.target.value);
    canvas.renderAll();
  };
```

- 드로잉 모드가 시작됐을 때의 canvas object length를 state로 저장 </br>
➤ undo 하면 canvas object들에 접근해서 마지막 object를 pop하고 redoData array 에 push </br> (드로잉 모드가 시작됐을 때의 canvas object length랑 현재 canvas object length 가 같아지면 return) 

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ➤ redo 하면 redoData array 의 마지막 object를 pop하고 undoData array에 push하여 해결완료!

```javascript
let redoData = [];
  let undoData = [];
  //Start Free Drawing
  const drawing = (canvas) => {
    let originData = canvas._objects.length;
    setOriginLength(originData);
    setIsDrawing(true);
    canvas.isDrawingMode = true;
    canvas.freeDrawingBrush.color = pickerColor;
    // canvas.freeDrawingCursor = "none";
    canvas.renderAll();
  };

  //undo
  const undo = () => {
    let newLength = canvas._objects.length;
    if (newLength <= originLength) return;
    let popData = canvas._objects.pop();
    redoData.push(popData);
    canvas.renderAll();
  };

  //redo
  const redo = () => {
    if (redoData.length === 0) return;
    let popData = redoData.pop();
    undoData.push(popData);
    canvas._objects.push(popData);
    canvas.renderAll();
  };
```

### 4-2. react-intersection-observer의 useInView() 사용 시, 동일 페이지 내 탭 변환할 때 inView가 작동되지 않아 무한스크롤이 되지 않는 문제
- mapping 되는 배열 중에 가장 마지막 요소에만 ref를 걸어줌</br>
➤ 완벽하게 해결되지 않음

```javascript
likeStore.map((v, idx) => {
              return (
                <OneStore
                  key={idx}
                  ref={likeStore.length === idx + 1 ? refStore : null}
                  onClick={() => {
                    navigate(`/storedetail/${v.storeId}`);
                  }}
                >
```
- 탭 마다 inView를 나눠서 진행하여 해결완료!

```javascript
  useEffect(() => {
    if (toggleState === 1) {
      dispatch(storeAction.getLikeStoreDB(pageNumber));
    } else if (toggleState === 2) {
      dispatch(storeAction.getMyReviewDB(pageNumber));
    }
  }, [pageNumber, toggleState]);

  useEffect(() => {
    if (inViewStore) {
      setPageNumber(pageNumber + 1);
    } else if (inViewReview) {
      setPageNumber(pageNumber + 1);
    }
  }, [inViewStore, inViewReview]);
```
### 4-3. 도안 모아보기, 케이크 모아보기, 마이페이지 등 탭으로 나눠진 페이지에서 다른 페이지로 이동하면 default 탭으로 탭위치가 초기화되는 문제
- modules 에서 sortType action과 reducer를 새로 만들어서 탭의 state 값을 리덕스로 관리하여 해결완료!

```javascript
// sortType action
const setDesignSortType = createAction(SET_DESIGN_SORTTYPE, (list) => ({
  list,
}));
const setMyDesignSortType = createAction(SET_MYDESIGN_SORTTYPE, (list) => ({
  list,
}));
```

```javascript
// reducer
    [SET_DESIGN_SORTTYPE]: (state, action) =>
      produce(state, (draft) => {
        draft.design_sort_type = action.payload.list;
      }),
    [SET_MYDESIGN_SORTTYPE]: (state, action) =>
      produce(state, (draft) => {
        draft.mydesign_sort_type = action.payload.list;
      }),
```

```javascript
// dispatch action
        <NewButton
          onClick={() => {
            setSortType("createdDate");
            dispatch(designAction.setDesignSortType("createdDate"));
          }}
          sortType={sortType}
        >
          최신순
        </NewButton>

        <LikeButton
          onClick={() => {
            setSortType("likeCnt");
            dispatch(designAction.setDesignSortType("likeCnt"));
          }}
          sortType={sortType}
        >
          좋아요순
        </LikeButton>
        <CommentButton
          onClick={() => {
            setSortType("commentCnt");
            dispatch(designAction.setDesignSortType("commentCnt"));
          }}
          sortType={sortType}
        >
          댓글순
        </CommentButton>
        <CheckButton
          onClick={() => {
            setSortType("viewCnt");
            dispatch(designAction.setDesignSortType("viewCnt"));
          }}
          sortType={sortType}
        >
          조회수순
        </CheckButton>
```

### 4-4. 케이크 이미지 모달, 매장 상세, 게시글 등 새로고침을 하지 않고 페이지를 이동할때 이전 데이터가 잠시 남아있는 문제
- 페이지를 이동하는 이벤트 발생 시점에 기존 저장소를 비워서 해결완료!

```javascript
/// dispatch action
      <Modal
        isOpen={modalIsOpen}
        onRequestClose={() => {
          setModalIsOpen(false);
          dispatch(cakeAction.cakeImage({}));
        }}
```

```javascript
/// action
const getCakeList = createAction(GET_CAKE_LIST, (list) => ({ list }));
const cakeImage = createAction(CAKE_IMAGE, (img) => ({ img }));
```

### 4-5. 이미지 렌더링 속도 개선
- compressorjs 라이브러리를 사용하여 사용자가 업로드한 사진을 압축 </br>
➤ Browser Image Compression 라이브러리도 이미지의 사이즈를 줄이거나 용량을 압축해주는 라이브러리이지만 이미지의 사이즈 값을 조절하면 원본 이미지의 비율을 유지하지 못한다. 
그래서 원본의 비율을 유지하면서 화질만 낮춰서(파일 크기를 줄여서) 압축할 수 있는 compressorjs 라이브러리를 사용했다.
- 원본 비율은 유지하고 사용자 입장에서 허용할 수 있는 최소 화질을 모바일/데스크탑에서 테스트하여 화질 60% 압축

```javascript
  const selectFiles = () => {
    const currentFile = fileInput.current.files[0];
    new Compressor(currentFile, {
      quality: 0.6,
      success(result) {
        setFile(result);
      },
    });
```
<p align="center"><img src="https://user-images.githubusercontent.com/97425158/162008040-82e9f285-66df-41b2-82f5-05cdbe1ed511.png"></a></p> -->

## 🗣 **3. 피드백 및 개선 사항**
### 피드백 정리 Notion <a href="https://www.notion.so/05da5680b0744123a55b34cfa3d1d2d4"><img src="https://img.shields.io/badge/Notion-000000?style=flat&logo=Notion&logoColor=white&link=https://available-parent-09c.notion.site/12-aac1c51225424d16bda9bcce1bdb2360"></a> 

### 개선사항
- 케이크탭에서 매장으로 가면 홈으로 바로 갈수가 없어요. </br>
➤ 매장 상세페이지에도 네비바를 추가하여 해결완료!

![ezgif com-gif-maker](https://user-images.githubusercontent.com/97425158/161767294-fa238e55-1f48-4a83-9671-a3bd8aa45ff1.gif)

- 매장검색 결과에서 매장 정보가 아래 숨어서 완전히 안보여요. </br>
➤ 매장 정보를 지도 위에 띄워서 해결 완료!

![ezgif com-gif-maker 복사본](https://user-images.githubusercontent.com/97425158/161790965-af0b15d6-6317-4b4b-bd01-6f08c1012d73.gif)

- 게시글 작성 시, 줄바꿈하고 등록했을 때 반영이 안돼요. </br>
➤ 게시글 페이지에 white-space 속성값을 추가하여 해결완료!

![ezgif com-gif-maker](https://user-images.githubusercontent.com/97425158/161795793-3f4b2698-f00e-4226-a157-339efbb24cb3.gif)

- 도안 그리기 사용 방법을 잘 모르겠어요. </br>
➤ 그리기 토글 클릭 시 튜토리얼 모달을 띄어주어서 해결완료!

![ezgif com-gif-maker](https://user-images.githubusercontent.com/97425158/161824870-109b7f47-a6be-4370-bd9b-3d6c45064b26.gif)

- 홈탭에서 최신 리뷰 누르면 매장 상세페이지의 리뷰 탭으로 이동하게 해주세요. </br>
➤ useNavigate() 변수에 state 값을 넘겨주고, 해당 페이지에서 useLocation() 으로 state 값 유무 판별하여 useState 초기값 설정하여 해결완료!

![ezgif com-gif-maker](https://user-images.githubusercontent.com/97425158/161903341-4db9e242-c4f8-4fe8-9cfd-cd37bb8a6a58.gif)

- 도안 그리기에서 사용했던 색상 재사용이 안돼요. </br>
➤ colorpicker input 에 onClick을 추가하여 컬리피커 클릭하면 바로 전에 사용했던 (useState으로 저장된) 색상으로 변경하여 해결완료!

![ezgif com-gif-maker](https://user-images.githubusercontent.com/97425158/161904045-26203032-2f6d-446c-aedc-8bfce2584d32.gif)
